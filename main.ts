namespace SpriteKind {
    export const Item = SpriteKind.create()
    export const object = SpriteKind.create()
}
function cutscene () {
    scene.setBackgroundImage(assets.image`spaceearth`)
    game.showLongText("meanwhile in space...", DialogLayout.Bottom)
    scene.setBackgroundImage(assets.image`space`)
    meteor = sprites.create(img`
        . . . . . . . c c c a c . . . . 
        . . c c b b b a c a a a c . . . 
        . c c a b a c b a a a b c c . . 
        . c a b c f f f b a b b b a . . 
        . c a c f f f 8 a b b b b b a . 
        . c a 8 f f 8 c a b b b b b a . 
        c c c a c c c c a b c f a b c c 
        c c a a a c c c a c f f c b b a 
        c c a b 6 a c c a f f c c b b a 
        c a b c 8 6 c c a a a b b c b c 
        c a c f f a c c a f a c c c b . 
        c a 8 f c c b a f f c b c c c . 
        . c b c c c c b f c a b b a c . 
        . . a b b b b b b b b b b b c . 
        . . . c c c c b b b b b c c . . 
        . . . . . . . . c b b c . . . . 
        `, SpriteKind.Player)
    meteor.setPosition(100, 50)
    story.startCutscene(function () {
        spaceship = sprites.create(img`
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ............................................................................cccccc.............................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            .........................................................................bc.bddddbccb..........................................................................
            .........................................................................b..b1111bffb..........................................................................
            .......................................................................ccbbbbbbbbbbbbcc........................................................................
            .....................................................................fffffd1bffffb1dfff........................................................................
            .....................................................................bcffcd1bffffb1dcffcb......................................................................
            ....................................................................bccbddcccbbbbcccddbccb.....................................................................
            ....................................................................bffc1dcfcbbbbcfcd1cffb.....................................................................
            ..................................................................cccbbb1dcfcb696cfcddbbbccc...................................................................
            ..................................................................fffd1dddcfcbb69cffddd1dfff...................................................................
            ...............................................................1ccffcdddddffcbbbbcfcddd1dcffcb1................................................................
            ...............................................................bcfcbbdddddffb1111cfcdddddbbcfcb................................................................
            ...............................................................bffcbbdddddcfb1111bffdddddbbcffb................................................................
            ...............................................................bffcbbdddddffcddddcfcdddddbbcffb................................................................
            ...............................................................bffcbbdddddcfcbbbbcfcdddddbbcffb................................................................
            ...............................................................bffcbbdddddcfcbbbbcfcdddddbbcffb................................................................
            ...............................................................bffcbbdddddddcffffcdddddddbbcffb................................................................
            ...............................................................bffcbbdddddddcffffcdddddddbbcffb................................................................
            ...............................................................bffcbbdddddddbccccbdddddddbbcffb................................................................
            ...............................................................bffcbbddddddddddddddddddddbbcffb................................................................
            ...............................................................bffcbbddddddddddddddddddddbbcffb................................................................
            ...............................................................bffcbbddddddddddddddddddddbbcffb................................................................
            ...............................................................bffcbbddddddddddddddddddddbbcffb................................................................
            ...............................................................bffcbbdddddddbbbbbbdddddddbbcffb................................................................
            ...............................................................bffcbbdddddddcffffcdddddddbbcffb................................................................
            ........................................................bbb1...bffcbbdddddddcffffcdddddddbbcffb...1bbb.........................................................
            ........................................................cfcd...bffcbbdddddccccccccccdddddbbcffb...dcfc.........................................................
            ...........................................................d...bffcbbdddddffc6c66cffdddddbbcffb...d............................................................
            ...........................................................d.ddbcfcbbdddddffcccc6cffdddddbbcffbd1.d............................................................
            ...........................................................d.d1bcfcbbdddddffcccc6cffdddddbbcffb11.d............................................................
            ...........................................................d.bbbcfcbbdddddffccccccffdddddbbcfcbbb.d............................................................
            ...........................................................d..ccddbfcdddddffc6ccccffdddddcfbddc...d............................................................
            ...........................................................d.fffddbffdddddffc6cc6cffdddddffb1d....d............................................................
            ...........................................................d.fffd1bccbbbddffcb777cffddbbbccb1d....d............................................................
            ...........................................................d..ffd1dbbffcddffcdbdbcfcddcffbbd1d....d............................................................
            ...........................................................bbcfcd1dbbffcddffcbbbdcffddcffbbdddc.cbb............................................................
            .............................................................bddddbbbffcddffc7776cffddcffbbbddddb..............................................................
            .............................................................b1dddbbbffcddffc7cc7cfcddcffbbbddd1b..............................................................
            .............................................................c1dddbbbffcbcccccc77ccccccffbbbddd1c..............................................................
            .............................................................c1dddbbbfffffcc7cc77c7cfffffbbbddd1b..............................................................
            .............................................................b1dddbbbfffffccccccccccfffffbbbddd1b..............................................................
            ...........................................................dddddddbbbfffcc6cccccccccccfffbbbddddddd............................................................
            ...........................................................d1dddddbbbfff66c7ccccc6666cfffbbbddddd1d............................................................
            .....................................................c...cbdddddddbbbffccc77777777bbcccffbbbdddddddbcc..c......................................................
            .....................................................b..c11dddddddbbbffcbbbddddddddbbbcffbbbdddddddd1c..b......................................................
            .....................................................b..b11dddddddbbbffcbbbddddddddbbbcffbbbdddddddd1b..b......................................................
            .....................................................b..c1ddddddddbbbffcbbbddddddddbbbcffbbbddddddd11c..b......................................................
            .....................................................b..c11dddddddbbbffcbbbddddddddbbbcffbbbdddddddd1c.cb......................................................
            ......................................................bbbdddddddddbbbffccc77b7777777cccffbbbdddddddddbbb.......................................................
            ......................................................d1ddddddddddbbbfffccccccccccccccfffbbbdddddddddd1d.......................................................
            ................................................1bbcccddddddddddddbbccfccccc777ccccccccfccbbddddddddddddcccbbb.................................................
            ................................................ccfbddddddddddddddbffcbcffcc6777ccccffcbcffbddddddddddddddbfcb.................................................
            ................................................cffb1dddddddddddddbffbbcffc66c7ccc7cffcbbffbddddddddddddd1bfcb.................................................
            .................................................bbbddddddddddddbccffbbcccccc7cccccccccbbffccbddddddddddddbbb..................................................
            .................................................d1dddddddddddddcffffbbbdbffc7cc7cffbdbbbffffcddddddddddddd1d..................................................
            ...........................................bdbcccddddddddddddddbcffffbbbdbffccccccffbdbbbffffcbddddddddddddddcccbdb............................................
            ...........................................ccfcddddddddddddddbfccbcffbbbdbffc7cc6cffbdbbbffcbccfbddddddddddddddbfcc............................................
            ...........................................cffb11ddddddddddddbffcbcffbbbdbffcccc6cffbdbbbffcbbffbdddddddddddd11bfcc............................................
            .........................................cffffbddddddddddddbcccbbbcffbbbdbffccccccffbdbbbffcbbbcccbddddddddddddcffffc..........................................
            .........................................cffffcddddddddddddcfcddbbcffbbbbbffcccc6cffbbbbbffcbbddcfcddddddddddddcffffc..........................................
            ......................................1dbcffffcdddddddddddbcfcddbbcffcbbbbffc7777cffbbbbcffcbbddcfcbdddddddddddcffffcbd1.......................................
            ......................................ccffccffcdddddddddbfcbddddbbcfffffffffcbbbbcfffffffffcbbddddbcfbdddddddddcffcccfcc.......................................
            ......................................cfff6cffcdddddddddbffdddddbbcfffffffffcbbbbcfffffffffcbbdddddffbdddddddddcffccfffc.......................................
            ......................................cfff6cffcdddddddcccffdddddbbcffcccccffcb7b7cffcccccffcbbdddddffccbdddddddcffc6fffc.......................................
            ......................................cfff6cffcdddddddcffffdddddbbcffbbbbbffcc766cffbdbbbffcbbdddddffffcdddddddcffc6fffc.......................................
            ......................................cfff6cffcdddddddccfffdddddbbcffbbbdbffc6cc6cffbbbbbffcbbdddddfffccdddddddcffc6fffc.......................................
            ......................................cfff6cffcddddbfcddbffdddddbbcffbbbdbffc7cc7cffbdbbbffcbbdddddffbdbcfbddddcffc6fffc.......................................
            ......................................cfff6cffcddddbffddbffdddddbbcffbbbdbffccccccffbdbbbffcbbdddddffbddffbddddcffc6fffcf......................................
            ....................................cffccc6cffcddbcbbbddbffdddddbbcffbbbdbffc77cccffbdbbbffcbbdddddffbddbbbcbddcffc6cccffc.....................................
            ....................................cffc766cffcddcfcddddbffdddddbbcffbbbdbffc77cccffbdbbbffcbbdddddffbddddcfcddcffc666cffc.....................................
            ....................................cffc766cffcddccbddddbffdddddbbcffcbbbbffcccc6cffbbbccffcbbdddddffbddddbccddcffc666cffc.....................................
            ....................................cffcc66cfffffdddddddbffdddddbbcfffffffffccccccfffffffffcbbdddddffbdddddddfffffc666cffc.....................................
            ....................................cffcc66cfffffdddddddbffdddddbbcfffffffffc7ccccfffffffffcbbdddddffbdddddddfffffc666cffc.....................................
            ....................................cffcc66cffcbbdddddddbffdddddbbcffcccccffccc6ccffcccccffcbbdddddffbdddddddbbcffc66ccffc.....................................
            ....................................cffcc66cffcdddddddddbffdddddbbcffbbbdbffc7667cffbbbbbffcbbdddddffbdddddddddcffc66ccffc.....................................
            ....................................cffcc66cffcdddddddddbffdddddbbcffcbbbbffccccccffbbbbcffcbbdddddffbdddddddddcffc66ccffc.....................................
            ....................................cffcc66cffcdddddddddbffbbbbbffffffffffffffffffffffffffffffbbbbbffbdddddddddcffc66ccffc.....................................
            ....................................cffcc66cffcdddddddddbffbbbbbffffffffffffffffffffffffffffffbbbbbffbdddddddddcffc66ccffc.....................................
            ....................................cffcc66cffcdddddddbbcffccccccffffffffffffffffffffffffffffccccccffcbbdddddddcffc66ccffc.....................................
            ....................................cffcc66cffcdddddddbbcfffffffdfffbffffffffffffffffffffbfffdfffffffcbbdddddddcffc66ccffc.....................................
            ....................................cffcc66cffcdddddddbbcffffffcdfffbcffffffffffffffffffcbfffdcffffffcbbdddddddcffc66ccffc.....................................
            ....................................cffcc66cffcddddbbb..cccccccb1fffbbcee444455554444eecb9fff1bcccccccffbbbddddcffc66ccffc.....................................
            ....................................cffcc66cffcddddbbb.................e44444555544424e..............fffbbbddddcffc66ccffc.....................................
            ....................................cffcc66cffcddbbbccc.c..............e24444455544444e..............cfcccbbbddcffc66ccffc.....................................
            ....................................cffcc66cffcddbbcffd................e24444445544444e..............ffdffcbbddcffc66ccffc.....................................
            ....................................cffcc66cffcddbbcccd................e44444445544444e................dcccbbddcffc66ccffc.....................................
            ....................................cffcc66cffcbbffcccb................b43444554444433b................1cccffbbcffc66ccffc.....................................
            ....................................cffcc66cffcbbffc.....................d44455444443.....................cffbbcffc66ccffc.....................................
            ....................................cffcc66cfffccccc.....................d44444444443.....................cccccfffc66ccffc.....................................
            ....................................cffcc66cfffffd.......................d42444444443.......................dfffffc66ccffc.....................................
            ....................................cffc766cfffffd.......................d444444444bd.......................dccfffc66ccffc.....................................
            ....................................cffcc66cffccc1.......................1b4e4422ebb1.......................1cccffc66ccffc.....................................
            ....................................cffcc6ccffc.............................ee222e.............................cffcc6ccffc.....................................
            ....................................cffc7cffccb.............................b4444b.............................bccffc6cffc.....................................
            ....................................cffc7cffd....................................................................dffc6cffc.....................................
            ....................................cfccccffd....................................................................dffccccfc.....................................
            ....................................9cccfccc......................................................................cccfccc1.....................................
            ......................................cffc..........................................................................cffc.......................................
            ......................................bccb..........................................................................bccb.......................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            ...............................................................................................................................................................
            `, SpriteKind.Player)
        spaceship.setScale(0.2, ScaleAnchor.Middle)
        spaceship.setPosition(13, 50)
        story.spriteMoveToLocation(spaceship, 100, 50, 100)
        scene.cameraShake(4, 500)
        spaceship.startEffect(effects.warmRadial)
        story.printText("the ship has crashed and needs repairs!", 80, 0)
        effects.clearParticles(spaceship)
    })
    story.cancelCurrentCutscene()
}
let spaceship: Sprite = null
let meteor: Sprite = null
tiles.setCurrentTilemap(tilemap`map in doors`)
let mySprite = sprites.create(assets.image`duck`, SpriteKind.Player)
controller.moveSprite(mySprite)
scene.cameraFollowSprite(mySprite)
let key = sprites.create(assets.image`myImage`, SpriteKind.Item)
tiles.placeOnRandomTile(key, assets.tile`Tile0`)
multilights.addLightSource(mySprite)
multilights.toggleLighting(true)
multilights.bandWidthOf(mySprite, 14)
controller.moveSprite(mySprite)
scene.cameraFollowSprite(mySprite)
multilights.addLightSource(mySprite)
multilights.toggleLighting(true)
multilights.bandWidthOf(mySprite, 14)
// Example: Creating a key item
tiles.placeOnRandomTile(key, assets.tile`Tile0`)
game.onUpdateInterval(1000, function () {
    if (mySprite.tileKindAt(TileDirection.Right, assets.tile`Tile2`)) {
        if (game.askForNumber("", 4) == 1151) {
            game.splash("correct!")
            scene.cameraShake(4, 500)
            tiles.setCurrentTilemap(tilemap`lemap`)
        } else {
            game.splash("incorrect")
        }
    }
    if (mySprite.tileKindAt(TileDirection.Right, assets.tile`myTile0`)) {
        scene.cameraShake(6, 500)
        multilights.toggleLighting(false)
    }
})
forever(function () {
    if (key.overlapsWith(mySprite)) {
        story.spriteSayText(key, "1151")
    }
})
